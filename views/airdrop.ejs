<!DOCTYPE html>
<html lang="ko">
<head>
    <%- include('includes/cdn') %>
    <title><%= config.found_text %> | History</title>
</head>
<body>
<div class="body-bg" style="background-image:url('/images/body-bg.jpg')">
    <%- include('includes/nav') %>
    <%- include('includes/header') %>
    <div class="body-bg" style="background-image:url('/images/body-bg.png')" >
    <section class="nftmax-adashboard nftmax-show">
        <div class="container">
            <div class="row">
                <div class="col-lg-9 col-12 nftmax-main__column">
                    <div class="nftmax-body">
                        <!-- Dashboard Inner -->
                        <div class="nftmax-dsinner">
                            <!-- Dashboard Slider -->
                            <div class="nftmax-wallet__dashboard">

                                <div class="row">
                                    <div class="col-12">
                                        <div class="nftmax-table mg-top-40">
                                            <div class="nftmax-table__heading">
                                                <h3 class="nftmax-table__title mb-0">에어드랍 내역 <span class="nftmax-table__badge"> <%=airList.length%></span></h3>
                                                <!-- <ul  class="nav nav-tabs  nftmax-dropdown__list" id="nav-tab" role="tablist">
                                                    <li class="nav-item dropdown ">
                                                        <a class="nftmax-sidebar_btn nftmax-heading__tabs nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">All Categories <span class="nftmax-table__arrow--icon"><svg width="13" height="6" viewBox="0 0 13 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.7" d="M12.4124 0.247421C12.3327 0.169022 12.2379 0.106794 12.1335 0.0643287C12.0291 0.0218632 11.917 0 11.8039 0C11.6908 0 11.5787 0.0218632 11.4743 0.0643287C11.3699 0.106794 11.2751 0.169022 11.1954 0.247421L7.27012 4.07837C7.19045 4.15677 7.09566 4.219 6.99122 4.26146C6.88678 4.30393 6.77476 4.32579 6.66162 4.32579C6.54848 4.32579 6.43646 4.30393 6.33202 4.26146C6.22758 4.219 6.13279 4.15677 6.05312 4.07837L2.12785 0.247421C2.04818 0.169022 1.95338 0.106794 1.84895 0.0643287C1.74451 0.0218632 1.63249 0 1.51935 0C1.40621 0 1.29419 0.0218632 1.18975 0.0643287C1.08531 0.106794 0.990517 0.169022 0.910844 0.247421C0.751218 0.404141 0.661621 0.616141 0.661621 0.837119C0.661621 1.0581 0.751218 1.2701 0.910844 1.42682L4.84468 5.26613C5.32677 5.73605 5.98027 6 6.66162 6C7.34297 6 7.99647 5.73605 8.47856 5.26613L12.4124 1.42682C12.572 1.2701 12.6616 1.0581 12.6616 0.837119C12.6616 0.616141 12.572 0.404141 12.4124 0.247421Z" fill="#374557" fill-opacity="0.6"></path></svg></span></a>
                                                        <ul class="dropdown-menu nftmax-sidebar_dropdown">
                                                            <a class="dropdown-item list-group-item" data-bs-toggle="tab" data-bs-target="#table_1" role="tab">Categories V1</a>
                                                            <a class="dropdown-item list-group-item" data-bs-toggle="tab" data-bs-target="#table_2" role="tab">Categories V2</a>
                                                            <a class="dropdown-item list-group-item"  data-bs-toggle="tab" data-bs-target="#table_1" role="tab">Categories V3</a>
                                                        </ul>
                                                    </li>
                                                </ul> -->
                                            </div>
                                            <div class="tab-content" id="myTabContent">
                                                <div class="tab-pane fade show active" id="table_1" role="tabpanel" aria-labelledby="table_1">
                                                    <!-- NFTMax Table -->
                                                    <table id="nftmax-table__main" class="nftmax-table__main nftmax-table__main-v1">
                                                        <!-- NFTMax Table Head -->
                                                        <thead class="nftmax-table__head">
                                                        <tr>
                                                            <th class="nftmax-table__column-1 nftmax-table__h1">상품</th>
                                                            <th class="nftmax-table__column-2 nftmax-table__h2">sales</th>
                                                            <th class="nftmax-table__column-4 nftmax-table__h4">변동금액</th>
                                                            <th class="nftmax-table__column-4 nftmax-table__h4">누적금액</th>
                                                        </tr>
                                                        </thead>
                                                        <!-- NFTMax Table Body -->
                                                        <tbody class="nftmax-table__body">
                                                            <% if (airList.length > 0) {
                                                                airList.forEach(function(el, index) { %>
                                                                        <tr>
                                                                            <td class="nftmax-table__column-1 nftmax-table__data-1">
                                                                                <div class="nftmax-table__product">
                                                                                    <a href="#n" onclick="fnGetNftImageInfo('http://nftnting.com','<%= el.nft_img %>');">
                                                                                        <div class="nftmax-table__product-img">
                                                                                            <img src="http://nftnting.com/<%= el.nft_img %>" alt="#">
                                                                                        </div>
                                                                                    </a>
                                                                                    <div class="nftmax-table__product-content">
                                                                                        <a href="#n" onclick="fnGetNftImageInfo('http://nftnting.com','<%= el.nft_img %>');">
                                                                                            <h4 class="nftmax-table__product-title">
                                                                                                <%= el.nft_nm %>
                                                                                            </h4>
                                                                                        </a>
                                                                                        <p class="nftmax-table__product-desc">Owned by  <a href="#n">CNFT</a></p>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td class="nftmax-table__column-2 nftmax-table__data-2">
                                                                                <div class="nftmax-table__amount nftmax-table__text-one">
                                                                                    <span class="nftmax-table__text">
                                                                                        <b>지급</b>
                                                                                    </span>
                                                                                </div>
                                                                            </td>
                                                                            <td class="nftmax-table__column-3 nftmax-table__data-3">
                                                                                <div class="nftmax-table__amount nftmax-table__text-one">
                                                                                    <span class="nftmax-table__text">
                                                                                        <b><%= el.price %></b>
                                                                                    </span>
                                                                                </div>
                                                                            </td>
                                                                            <td class="nftmax-table__column-3 nftmax-table__data-3">
                                                                                <div class="nftmax-table__amount nftmax-table__text-one">
                                                                                    <span class="nftmax-table__text">
                                                                                        <b><%= el.tot_price %></b>
                                                                                    </span>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                <% }) %>
                                                                <% } else { %>
                                                                    <!-- <tr>
                                                                        <% if (cmpnyInfo.point_view_yn == 'Y') { %>
                                                                            <td colspan="6" style="text-align: center;">내역이 없습니다.</td>
                                                                        <% } else { %>
                                                                            <td colspan="5" style="text-align: center;">내역이 없습니다.</td>
                                                                        <% } %>
                                                                    </tr> -->
                                                            <% } %>
                                                            
                                                        </tbody>
                                                        <!-- End NFTMax Table Body -->
                                                       
                                                    </table>
                                                    <!-- End NFTMax Table -->
                                                    <div class="view-wallet__btn top-sell" id="viewMore"><a href="#n" onclick="viewMore()">더보기</a></div>
                                                    <input type="hidden" id="pageIndex" value="<%= pagination.pageIndex %>">
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End Dashboard Slider -->

                        </div>
                        <!-- End Dashboard Inner -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    </div>
</div>
</body>

<div class="nftmax-preview__modal modal fade" id="notFoundMore" tabindex="-1" aria-labelledby="logoutmodal" aria-hidden="true" >
    <div class="modal-dialog modal-dialog-centered nftmax-close__modal-close">
        <div class="modal-content nftmax-preview__modal-content">
            <div class="modal-header nftmax__modal__header">
                <h4 class="modal-title nftmax-preview__modal-title" id="logoutmodal">알림</h4>
                <button type="button" class="nftmax-preview__modal--close btn-close" data-bs-dismiss="modal" aria-label="Close"><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 16.16C36 17.4399 36 18.7199 36 20.0001C35.7911 20.0709 35.8636 20.2554 35.8385 20.4001C34.5321 27.9453 30.246 32.9248 22.9603 35.2822C21.9006 35.6251 20.7753 35.7657 19.6802 35.9997C18.4003 35.9997 17.1204 35.9997 15.8401 35.9997C15.5896 35.7086 15.2189 35.7732 14.9034 35.7093C7.77231 34.2621 3.08728 30.0725 0.769671 23.187C0.435002 22.1926 0.445997 21.1199 0 20.1599C0 18.7198 0 17.2798 0 15.8398C0.291376 15.6195 0.214408 15.2656 0.270759 14.9808C1.71321 7.69774 6.02611 2.99691 13.0428 0.700951C14.0118 0.383805 15.0509 0.386897 15.9999 0C17.2265 0 18.4532 0 19.6799 0C19.7156 0.124041 19.8125 0.136067 19.9225 0.146719C27.3 0.868973 33.5322 6.21922 35.3801 13.427C35.6121 14.3313 35.7945 15.2484 36 16.16ZM33.011 18.0787C33.0433 9.77105 26.3423 3.00309 18.077 2.9945C9.78479 2.98626 3.00344 9.658 2.98523 17.8426C2.96667 26.1633 9.58859 32.9601 17.7602 33.0079C26.197 33.0577 32.9787 26.4186 33.011 18.0787Z" fill="#374557" fill-opacity="0.6"></path><path d="M15.9309 18.023C13.9329 16.037 12.007 14.1207 10.0787 12.2072C9.60071 11.733 9.26398 11.2162 9.51996 10.506C9.945 9.32677 11.1954 9.0811 12.1437 10.0174C13.9067 11.7585 15.6766 13.494 17.385 15.2879C17.9108 15.8401 18.1633 15.7487 18.6375 15.258C20.3586 13.4761 22.1199 11.7327 23.8822 9.99096C24.8175 9.06632 26.1095 9.33639 26.4967 10.517C26.7286 11.2241 26.3919 11.7413 25.9133 12.2178C24.1757 13.9472 22.4477 15.6855 20.7104 17.4148C20.5228 17.6018 20.2964 17.7495 20.0466 17.9485C22.0831 19.974 24.0372 21.8992 25.9689 23.8468C26.9262 24.8119 26.6489 26.1101 25.4336 26.4987C24.712 26.7292 24.2131 26.3441 23.7455 25.8757C21.9945 24.1227 20.2232 22.3892 18.5045 20.6049C18.0698 20.1534 17.8716 20.2269 17.4802 20.6282C15.732 22.4215 13.9493 24.1807 12.1777 25.951C11.7022 26.4262 11.193 26.7471 10.4738 26.4537C9.31345 25.9798 9.06881 24.8398 9.98589 23.8952C11.285 22.5576 12.6138 21.2484 13.9387 19.9355C14.5792 19.3005 15.2399 18.6852 15.9309 18.023Z" fill="#374557" fill-opacity="0.6"></path></svg></button>
            </div>
            <div class="modal-body nftmax-modal__body modal-body nftmax-close__body" style="padding: 10px 20px;">
                <div class="nftmax-preview__close">

                    <ul class="nftmax-wallet__list" style="gap: 10px;width: 100%;">
                        <!-- Single Wallet -->
                        <li  class="nftmax-wallet__list-single" style="padding : 5px 15px;">
                            <div class="nftmax-balance-info m-1">
                                <p style="margin-bottom: 1px;">
                                    더 이상 내역이 없습니다.
                                </p>
                            </div>
                        </li>
                    </ul>
                    <input type="hidden" id="cancelSeq" />
                    <div class="nftmax__item-button--group">
                        <button class="nftmax__item-button--single nftmax-btn nftmax-btn__bordered--plus radius" data-bs-dismiss="modal"><span class="ntfmax__btn-textgr" >닫기</span> </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="nftmax-preview__modal modal fade" id="imgDetail" tabindex="-1" aria-labelledby="logoutmodal" aria-hidden="true" >
    <div class="modal-dialog modal-dialog-centered nftmax-close__modal-close">
        <div class="modal-content nftmax-preview__modal-content">
            <div class="modal-header nftmax__modal__header">
                <h4 class="modal-title nftmax-preview__modal-title" id="logoutmodal">NFT</h4>
                <button type="button" class="nftmax-preview__modal--close btn-close" data-bs-dismiss="modal" aria-label="Close" ><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 16.16C36 17.4399 36 18.7199 36 20.0001C35.7911 20.0709 35.8636 20.2554 35.8385 20.4001C34.5321 27.9453 30.246 32.9248 22.9603 35.2822C21.9006 35.6251 20.7753 35.7657 19.6802 35.9997C18.4003 35.9997 17.1204 35.9997 15.8401 35.9997C15.5896 35.7086 15.2189 35.7732 14.9034 35.7093C7.77231 34.2621 3.08728 30.0725 0.769671 23.187C0.435002 22.1926 0.445997 21.1199 0 20.1599C0 18.7198 0 17.2798 0 15.8398C0.291376 15.6195 0.214408 15.2656 0.270759 14.9808C1.71321 7.69774 6.02611 2.99691 13.0428 0.700951C14.0118 0.383805 15.0509 0.386897 15.9999 0C17.2265 0 18.4532 0 19.6799 0C19.7156 0.124041 19.8125 0.136067 19.9225 0.146719C27.3 0.868973 33.5322 6.21922 35.3801 13.427C35.6121 14.3313 35.7945 15.2484 36 16.16ZM33.011 18.0787C33.0433 9.77105 26.3423 3.00309 18.077 2.9945C9.78479 2.98626 3.00344 9.658 2.98523 17.8426C2.96667 26.1633 9.58859 32.9601 17.7602 33.0079C26.197 33.0577 32.9787 26.4186 33.011 18.0787Z" fill="#374557" fill-opacity="0.6"></path><path d="M15.9309 18.023C13.9329 16.037 12.007 14.1207 10.0787 12.2072C9.60071 11.733 9.26398 11.2162 9.51996 10.506C9.945 9.32677 11.1954 9.0811 12.1437 10.0174C13.9067 11.7585 15.6766 13.494 17.385 15.2879C17.9108 15.8401 18.1633 15.7487 18.6375 15.258C20.3586 13.4761 22.1199 11.7327 23.8822 9.99096C24.8175 9.06632 26.1095 9.33639 26.4967 10.517C26.7286 11.2241 26.3919 11.7413 25.9133 12.2178C24.1757 13.9472 22.4477 15.6855 20.7104 17.4148C20.5228 17.6018 20.2964 17.7495 20.0466 17.9485C22.0831 19.974 24.0372 21.8992 25.9689 23.8468C26.9262 24.8119 26.6489 26.1101 25.4336 26.4987C24.712 26.7292 24.2131 26.3441 23.7455 25.8757C21.9945 24.1227 20.2232 22.3892 18.5045 20.6049C18.0698 20.1534 17.8716 20.2269 17.4802 20.6282C15.732 22.4215 13.9493 24.1807 12.1777 25.951C11.7022 26.4262 11.193 26.7471 10.4738 26.4537C9.31345 25.9798 9.06881 24.8398 9.98589 23.8952C11.285 22.5576 12.6138 21.2484 13.9387 19.9355C14.5792 19.3005 15.2399 18.6852 15.9309 18.023Z" fill="#374557" fill-opacity="0.6"></path></svg></button>
            </div>
            <div class="modal-body nftmax-modal__body modal-body nftmax-close__body" style="padding: 10px 20px;">
                <div class="nftmax-preview__close">

                    <ul class="nftmax-wallet__list" style="gap: 10px;width: 100%;" id="imgList">
                        <!-- Single Wallet -->
                        
                    </ul>
                    <div class="nftmax__item-button--group">
                        <button class="nftmax__item-button--single nftmax-btn nftmax-btn__bordered bg radius " data-bs-dismiss="modal" >확인</button>
                        <!-- <button class="nftmax__item-button--single nftmax-btn nftmax-btn__bordered--plus radius" data-bs-dismiss="modal"><span class="ntfmax__btn-textgr">취소</span> </button> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</html>
<script>
    $(function () {
        $('#startDatePicker').datepicker({
            format: "yyyy-mm-dd",	//데이터 포맷 형식(yyyy : 년 mm : 월 dd : 일 )
            autoclose : true,	//사용자가 날짜를 클릭하면 자동 캘린더가 닫히는 옵션
            calendarWeeks : false, //캘린더 옆에 몇 주차인지 보여주는 옵션 기본값 false 보여주려면 true
            clearBtn : false, //날짜 선택한 값 초기화 해주는 버튼 보여주는 옵션 기본값 false 보여주려면 true
            immediateUpdates: true,
            templates : {
                leftArrow: '&laquo;',
                rightArrow: '&raquo;'
            }, //다음달 이전달로 넘어가는 화살표 모양 커스텀 마이징
            showWeekDays : true ,// 위에 요일 보여주는 옵션 기본값 : true
            todayHighlight : true ,	//오늘 날짜에 하이라이팅 기능 기본값 :false
            toggleActive : true,	//이미 선택된 날짜 선택하면 기본값 : false인경우 그대로 유지 true인 경우 날짜 삭제
            weekStart : 0 ,//달력 시작 요일 선택하는 것 기본값은 0인 일요일
            language : "ko"	//달력의 언어 선택, 그에 맞는 js로 교체해줘야한다.
        });//datepicker end

        $('#endDatePicker').datepicker({
            format: "yyyy-mm-dd",	//데이터 포맷 형식(yyyy : 년 mm : 월 dd : 일 )
            autoclose : true,	//사용자가 날짜를 클릭하면 자동 캘린더가 닫히는 옵션
            calendarWeeks : false, //캘린더 옆에 몇 주차인지 보여주는 옵션 기본값 false 보여주려면 true
            clearBtn : false, //날짜 선택한 값 초기화 해주는 버튼 보여주는 옵션 기본값 false 보여주려면 true
            templates : {
                leftArrow: '&laquo;',
                rightArrow: '&raquo;'
            }, //다음달 이전달로 넘어가는 화살표 모양 커스텀 마이징
            showWeekDays : true ,// 위에 요일 보여주는 옵션 기본값 : true
            todayHighlight : true ,	//오늘 날짜에 하이라이팅 기능 기본값 :false
            toggleActive : true,	//이미 선택된 날짜 선택하면 기본값 : false인경우 그대로 유지 true인 경우 날짜 삭제
            weekStart : 0 ,//달력 시작 요일 선택하는 것 기본값은 0인 일요일
            language : "ko"	//달력의 언어 선택, 그에 맞는 js로 교체해줘야한다.

        });//datepicker end
    });


    function viewMore() {
        $("#pageIndex").val(Number($("#pageIndex").val()) + 1);
        // var data = { "pageIndex": $("#pageIndex").val() };

        var data = {};
        data.pageIndex = $("#pageIndex").val();

        $.ajax({
            url: '/p/airAddView',
            dataType: 'json',
            type: 'POST',
            data: data,
            success: function (result) {
                console.log('result : ', result)

                let airList = result.data.airList;
                var pcHtml = '';
                var mobileHtml = '';

                if(airList.length > 0) {

                    for(var i = 0; i < airList.length; i++) {

                        
                        pcHtml += '<tr>';
                        pcHtml +=   '<td class="nftmax-table__column-1 nftmax-table__data-1">';
                        pcHtml +=       '<div class="nftmax-table__product">';
                        pcHtml +=           '<div class="nftmax-table__product-img">'; 
                        pcHtml +=               '<img src="http://nftnting.com/' + airList[i].nft_img + '" alt="#">'; 
                        pcHtml +=           '</div>'; 
                        pcHtml +=           '<div class="nftmax-table__product-content">'; 
                        pcHtml +=               '<h4 class="nftmax-table__product-title">'; 
                        pcHtml +=                   airList[i].nft_nm; 
                        pcHtml +=               '</h4>'; 
                        pcHtml +=               '<p class="nftmax-table__product-desc">Owned by  <a href="#">CNFT</a></p>'; 
                        pcHtml +=           '</div>'; 
                        pcHtml +=       '</div>'; 
                        pcHtml +=   '</td>'; 
                        pcHtml +=   '<td class="nftmax-table__column-2 nftmax-table__data-2">'; 
                        pcHtml +=       '<div class="nftmax-table__amount nftmax-table__text-one">'; 
                        pcHtml +=           '<span class="nftmax-table__text">'; 
                        pcHtml +=               '<b>지급</b>';
                        pcHtml +=           '</span>'; 
                        pcHtml +=       '</div>'; 
                        pcHtml +=   '</td>'; 
                        pcHtml +=   '<td class="nftmax-table__column-2 nftmax-table__data-2">'; 
                        pcHtml +=       '<div class="nftmax-table__amount nftmax-table__text-one">'; 
                        pcHtml +=           '<span class="nftmax-table__text">'; 
                        pcHtml +=               '<b>' + airList[i].price + '</b>';
                        pcHtml +=           '</span>'; 
                        pcHtml +=       '</div>'; 
                        pcHtml +=   '</td>'; 
                        pcHtml +=   '<td class="nftmax-table__column-2 nftmax-table__data-2">'; 
                        pcHtml +=       '<div class="nftmax-table__amount nftmax-table__text-one">'; 
                        pcHtml +=           '<span class="nftmax-table__text">'; 
                        pcHtml +=               '<b>' + airList[i].tot_price + '</b>';
                        pcHtml +=           '</span>'; 
                        pcHtml +=       '</div>'; 
                        pcHtml +=   '</td>'; 
                        pcHtml +='</tr>'; 
                        // $("#withdraw_mobile").append(mobileHtml);
                    }
                    $(".nftmax-table__body").append(pcHtml);
                } else {
                    $("#notFoundMore").modal('show');
                    $("#viewMore").hide();
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                // $('.popupWrap').hide();
                // $('.pMessage').html('세션이 종료 되었습니다. 로그인 후 다시 이용해 주세요.')
                // $('#alertPopup').show();
                alert('error')
            } //function끝
        });
    }

    function fnSearch() {
        let srtDt = $("#startDatePicker").val();
        let endDt = $("#endDatePicker").val();
        let pageIndex = $("#pageIndex").val();

        console.log(srtDt)
        console.log(endDt)
        console.log(pageIndex)

        var form = document.createElement("form");
        form.setAttribute("charset", "UTF-8");
        form.setAttribute("method", "Post"); //Post 방식
        form.setAttribute("action", "/p/view"); //요청 보낼 주소
        var hiddenField1 = document.createElement("input");
        hiddenField1.setAttribute("type", "hidden");
        hiddenField1.setAttribute("name", "pageIndex");
        hiddenField1.setAttribute("value", pageIndex);
        form.appendChild(hiddenField1);
        var hiddenField2 = document.createElement("input");
        hiddenField2.setAttribute("type", "hidden");
        hiddenField2.setAttribute("name", "srtDt");
        hiddenField2.setAttribute("value", srtDt);
        form.appendChild(hiddenField2);
        var hiddenField3 = document.createElement("input");
        hiddenField3.setAttribute("type", "hidden");
        hiddenField3.setAttribute("name", "endDt");
        hiddenField3.setAttribute("value", endDt);
        form.appendChild(hiddenField3);

        document.body.appendChild(form);
        form.submit();
    }

    function fnGetNftImageInfo(nftMallUrl, nft_img) {
        let html = "";
        html += '<li  class="nftmax-wallet__list-single" style="padding : 5px 15px;">';
        html += '<div class="nftmax-balance-info m-1">'
        html += '<p style="margin-bottom: 1px;">'
        html += '<img src="' + nftMallUrl + nft_img + '" alt="#">'
        html += '</p>'
        html += '</li>'
        $("#imgList").html(html)
        $("#buyDetail").modal('hide');
        $("#imgDetail").modal('show');
    }

    function fnGetNftBuyInfo(seq, index) {

        let data = {
            sellSeq: seq,
        }
        $.ajax({
            url: '/p/selectNftBuyList',
            dataType: 'json',
            type: 'POST',
            data: data,
            success: function (result) {
                if (result.success) {
                    let list = result.data;
                    if (list.length > 0) {
                        let html = "";
                        list.forEach(function (el, i) {
                            html += '<li  class="nftmax-wallet__list-single" style="padding : 5px 15px;">';
                            html += '<div class="nftmax-balance-info">'
                            
                            html += '<div class="nftmax-table__product-img">'
                            html += '<img src="' + el.nftMallUrl + el.nft_img + '" alt="#" onclick="fnGetNftImageInfo(\'' + el.nftMallUrl + '\',\'' + el.nft_img +'\')">'
                            html += '</div>'                                            
                            html += '<p style="margin-bottom: 1px;">' + el.nft_nm + '</p>'
                            html += "<a href='#n' onclick='window.open(\"https://baobab.scope.klaytn.com/tx/"+el.send_txid+"\",\"_blank\");'>"
                            html += '<p style="margin-bottom: 1px;">' + el.send_txid.substring(0,10) + '...</p>'
                            html += '</a>'
                            html += '</li>'
                            // html += "<img loading='lazy' src='"+el.nftMallUrl + el.nft_img+"' style='width: 30%;'>"
                            // html += "</td>";
                            // html += "<td id='nftNm'>";
                            // html += el.nft_nm;
                            // html += "</td>";
                            // html += "<td id='buyAmount'>";
                            // html += el.buy_amount;
                            // html += "</td>";
                            // html += "<td id='txId' colspan='3'>";
                            // // html += el.send_txid;
                            // html += "<a href='#n' onclick='window.open(\"https://baobab.scope.klaytn.com/tx/"+el.send_txid+"\",\"_blank\");'>"+el.send_txid+"</a>"
                            // html += "</td>";

                            // $(".collapseExample"+index+"-"+i).html("");
                            // $(".collapseExample"+index+"-"+i).html(html);
                        });
                        $("#buyList").html(html)
                    }
                    $("#buyDetail").modal('show');
                } else {
                    alert(result.message);
                }
                // $('#buyModal').modal('hide')
                // $('#viewAlarm').modal('show')
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('알수 없는 오류가 발생했습니다. 관리자에게 문의하세요.');
            } //function끝
        });
    }

    function chkAcc(price, bank_nm, bank_acc, acc_nm) {
        $("#totalPrice").html(price);
        $("#acc_nm").html(acc_nm);
        $("#bank_nm").html(bank_nm);
        $("#bank_acc").html(bank_acc);
        $("#buyAlarm").modal('show');
    }

    function buyCancelView(seq) {
        // fnViewConfirmAlarm('구매취소', '취소하시겠습니까?', 'buyCancelProc(\"'+seq+'\")');
        $("#buyCancel").modal('show');
        $("#cancelSeq").val(seq)
    }

    function buyCancelProc() {
        let data = {
            seq: $("#cancelSeq").val()
        }

        $.ajax({
            url: '/p/buyCancel',
            dataType: 'json',
            type: 'POST',
            data: data,
            success: function (result) {
                $("#viewConfirmAlarm").modal('hide');
                if (result.success) {
                    $("#cancelComp").modal('show');
                    // fnViewRefreshAlarm('취소되었습니다.');
                } 
                // $('#buyModal').modal('hide')
                // $('#viewAlarm').modal('show')
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                $("#viewConfirmAlarm").modal('hide');
                $("#modal-text").html('알수 없는 오류가 발생했습니다. 관리자에게 문의하세요.');
                $("#viewAlarm").modal('show');
            } //function끝
        });
    }
</script>