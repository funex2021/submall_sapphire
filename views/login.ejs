<!DOCTYPE html>
<html lang="ko">
<head>
    <%- include('includes/cdn') %>
    <title><%=config.found_text%> | Login</title>
</head>
<body>
<div class="body-bg" style="background-image:url('/images/body-bg.jpg')">

    <!-- NFTMax Welcome -->
    <section class="nftmax-wc nftmax-wc__full">
        <div class="container-fluid">
            <div class="row g-0">
                <div class="col-xxl-6 col-lg-6 col-12 nftmax-hidden-rp">
                    <div class="nftmax-wc__inner nft-gr-primary">
                        <!-- Logo -->
                        <div class="nftmax-wc__logo">
                            <a href="/p/buyview"><img src="/images/cnft_logo-removebg-preview.png" alt="#"></a>
                        </div>
                        <!-- Middle Image -->
                        <div class="nftmax-wc__middle">
                            <a href="/p/buyview"><img src="/images/ikonbit.png" alt="#"></a>
                        </div>
                        <!-- Welcome Heading -->
                        <div class="nftmax-wc__heading">
                            <h2 class="nftmax-wc__title">Welcome to IKONBIT <br> CNFT</h2>
                        </div>

                    </div>
                </div>
                <div class="col-xxl-6 col-lg-6 col-12">
                    <!-- Welcome Form -->
                    <div class="nftmax-wc__form" id="login-form">
                        <div class="nftmax-wc__form-inner">
                            <div class="nftmax-wc__heading">
                                <h3 class="nftmax-wc__form-title nftmax-wc__form-title__one" style="background-image:url('/images/heading-vector.png')">Log in</h3>
                            </div>
                            <!-- Sign in Form -->
                            <div class="nftmax-wc__form-main">
                                <div class="form-group">
                                    <label class="nftmax-wc__form-label">ID</label>
                                    <div class="form-group__input">
                                        <span class="nftmax-wc__icon">
                                            <svg class="inline" xmlns="http://www.w3.org/2000/svg" width="22" height="20" viewBox="0 0 22 20" fill="none">
                                                <path d="M21.7764 4.12903L14.1237 11.7818C13.2704 12.6329 12.1143 13.1109 10.9091 13.1109C9.7039 13.1109 8.54787 12.6329 7.69457 11.7818L0.0418183 4.12903C0.029091 4.27267 0 4.40267 0 4.54539V15.4545C0.00144351 16.6596 0.480803 17.8149 1.33293 18.6671C2.18506 19.5192 3.34038 19.9985 4.54547 20H17.2728C18.4779 19.9985 19.6332 19.5192 20.4853 18.6671C21.3374 17.8149 21.8168 16.6596 21.8182 15.4545V4.54539C21.8182 4.40267 21.7892 4.27267 21.7764 4.12903Z" fill="#374557" fill-opacity="0.6"></path>
                                                <path d="M12.8389 10.4964L21.1425 2.19182C20.7403 1.52484 20.1729 0.972764 19.4952 0.588847C18.8175 0.204931 18.0523 0.00212789 17.2734 0H4.5461C3.76721 0.00212789 3.00201 0.204931 2.3243 0.588847C1.6466 0.972764 1.07926 1.52484 0.677002 2.19182L8.98066 10.4964C9.493 11.0067 10.1867 11.2932 10.9098 11.2932C11.6329 11.2932 12.3265 11.0067 12.8389 10.4964Z" fill="#374557" fill-opacity="0.6"></path>
                                            </svg>
                                        </span>
                                        <input class="nftmax-wc__form-input" type="text" name="login-form-username" id="login-form-username" value="<%=userId%>" placeholder="<%=config.login_text%>" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="nftmax-wc__form-label">Password</label>
                                    <div class="form-group__input">
                                        <span class="nftmax-wc__icon">
                                            <svg class="inline" width="18" height="21" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M14.4467 7.1581V5.94904C14.4467 2.66455 11.7822 0 8.49771 0C5.21323 0 2.54867 2.66455 2.54867 5.94904V7.1581C1.00076 7.83194 -0.000366211 9.36059 -0.000366211 11.0471V16.149C0.0034843 18.494 1.90178 20.3961 4.25059 20.4H12.7525C15.0975 20.3961 16.9996 18.4978 17.0035 16.149V11.051C16.9919 9.36059 15.9908 7.83579 14.4467 7.1581ZM9.34482 14.451C9.34482 14.9207 8.96362 15.3019 8.49386 15.3019C8.0241 15.3019 7.6429 14.9207 7.6429 14.451V12.749C7.6429 12.2793 8.0241 11.8981 8.49386 11.8981C8.96362 11.8981 9.34482 12.2793 9.34482 12.749V14.451ZM12.7448 6.8H4.24289V5.94904C4.24289 3.60023 6.14505 1.69807 8.49386 1.69807C10.8427 1.69807 12.7448 3.60023 12.7448 5.94904V6.8Z" fill="#374557" fill-opacity="0.6"></path>
                                            </svg>
                                        </span>
                                        <input class="nftmax-wc__form-input" name="login-form-password" id="login-form-password" type="password"  placeholder="<%=config.pwd_text%>" />
                                    </div>
                                </div>
                                <div class="form-group mt-lg-5 mt-5">
                                    <div class="nftmax-wc__button">
                                        <button class="ntfmax-wc__btn" onclick="fnLogin()">로그인</button>
                                        <% if (config.sign_yn == 'Y') { %>
                                            <button class="ntfmax-wc__btn ntfmax-wc__btn-google" onclick="location.href='/signUp'">회원가입</button>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="g-recaptcha" data-sitekey="6LeJT5AdAAAAAJHV9inipwiPSnNhaAmR6S3gy3QU"></div>
                                </div>
                                <input type="hidden" name="amount" id="amount" />
                                <input type="hidden" name="is_captcha" id="is_captcha" value="<%=config.is_captcha%>"/>
                                <% if (config.sign_yn == 'Y') { %>
                                <div class="form-group">
                                    <div class="nftmax-wc__bottom">
                                        <p class="nftmax-wc__text">Dont’t have an aceount ? <a href="/signUp">Sign up free</a></p>
                                    </div>
                                </div>
                                <% } %>
                            </div>
                            <!-- End Sign in Form -->
                        </div>
                    </div>
                    <!-- End Welcome Form -->
                </div>
            </div>
        </div>
    </section>
    <!-- End NFTMax Welcome -->

</div>
</body>
</html>
<% if (config.is_captcha == 'Y') { %>
    <script src="https://www.google.com/recaptcha/api.js"></script>
<% } %>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function fnAlertModal(text) {
        Swal.fire({
            title: "알림",
            text: text,
            heightAuto: false,
            showCloseButton: true,
        });
    }

    function fnRedirectModal(text, url) {
        Swal.fire({
            title: "알림",
            text: text,
            type: "success",
            heightAuto: false,
            allowOutsideClick: false,
        }).then(function (result) {
            if (true) {
                window.location = url;
            }
        });
    }

    $(function () {
        // fnLogin()
        $("#login-form").keyup(function(e){
            if(e.keyCode == 13)  fnLogin();
        });
    });

    function fnLogin() {
        if ($('#login-form-username').val() == '') {
            // $('.error').text('아이디는 필수 입력값입니다.');
            // $('.error').show();
            return fnAlertModal('아이디는 필수 입력값입니다.');
        }

        if ($('#login-form-password').val() == '') {
            // $('.error').text('패스워드는 필수 입력값입니다.');
            // $('.error').show();
            return fnAlertModal('패스워드는 필수 입력값입니다.');
        }
        if($("#is_captcha").val() == 'Y') {
            //리캡챠
            //사이트키는 div태그에 데이터로 넣어야함
            var v = grecaptcha.getResponse();
            if (v.length == 0) {
                document.querySelector(
                    '.pMessage'
                ).innerHTML = `'로봇이 아닙니다.' 체크박스를 클릭하세요.`;
                $('.popupWrap').show();
                $(document).on('click', '.popClose', function () {
                    $(this).parents('#popupWrap').hide();
                });
                return false;
            }
        }

        let form = document.createElement('form');
        form.setAttribute('charset', 'UTF-8');
        form.setAttribute('method', 'post'); //Post 방식
        form.setAttribute('action', '/m/signin'); //요청 보낼 주소

        let hiddenField2 = document.createElement('input');
        hiddenField2.setAttribute('type', 'hidden');
        hiddenField2.setAttribute('name', 'memId');
        hiddenField2.setAttribute('value', $('#login-form-username').val());
        form.appendChild(hiddenField2);

        let hiddenField3 = document.createElement('input');
        hiddenField3.setAttribute('type', 'hidden');
        hiddenField3.setAttribute('name', 'memPass');
        hiddenField3.setAttribute('value', $('#login-form-password').val());
        form.appendChild(hiddenField3);

        let hiddenField4 = document.createElement('input');
        hiddenField4.setAttribute('type', 'hidden');
        hiddenField4.setAttribute('name', 'amount');
        hiddenField4.setAttribute('value', $('#amount').val());
        form.appendChild(hiddenField4);

        document.body.appendChild(form);
        form.submit();
    }
</script>

<style>
    .nftmax-wc__middle{
        max-height: 450px;
    }
</style>